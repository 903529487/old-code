<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
		<script type="text/javascript" src="js/sethtml.js"></script>
		<link rel="stylesheet" href="css/css.css" />
	</head>
<style>
	.showtitle{
		line-height: 1.2rem;padding: 0 0.2rem;background: #444443;border-bottom: 1px solid #D4EBFE;
		text-align: center;
		color: #fff;
	}
</style>
	<body>
		<header class="cart-head">
			<a href="index.html"><img src="img/xixn.png" alt="" />首页</a>
			选择规格
		</header>
		<!--购物车有商品-->
		<section class="goods_y">

			<section>
				<h3 class="showtitle">大闸蟹</h3>
				<div class="cart-box">
					<table border="0" cellspacing="0" cellpadding="0" class="cart-tab">
						<tr>
							<td style="display: none;"><i class="cle-yd-z "></i></td>
							<td>
								<div>
									<span style="width: 8rem;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;display: inline-block;">
										雄：3.2两*5只 雌：3.2两*5只 雌：3.2两*5只 雌：3.2两*5只
									</span>
									</div>
								<div style="margin-top: 0.3rem;line-height: 0.8rem;">
									<p>原价：<strike style="color: #00C8E0;">￥222</strike>&nbsp; &nbsp;&nbsp;&nbsp;单价：￥22<b class="ges" >0</b></p>
									
									<dd><img src="img/jage.png" style="height: 0.7rem;width: 0.7rem;vertical-align: middle;position: relative;top: -0.15rem;"/>
									<abbr class="danjia" style="font-size: 0.6rem;color: red;">16.00</abbr>
										<input type="hidden" name="" class="zendanjia" id="" value="16.00" />
									</dd>
								</div>
							</td>
						</tr>
						<tr>
							<td colspan="3" style="text-align: right;">
								<span class="car-tab-bj">选择数量</span>
								
							</td>
						</tr>
						<tr>
							<td>
								<section class="cart-mun-nub">
									<div class="crat-tile">
										购买数量
										<div class="crat-num-right">
											<button class="pay-minus2">-</button>
											<input type="text" name="" id="" value="0" class="pay-num-text2" />
											<button class="pay-add2">+</button>
										</div>
									</div>
									<div>
										<button class="crat-sub">确定</button>
									</div>
								</section>
							</td>
						</tr>
					</table>
					<table border="0" cellspacing="0" cellpadding="0" class="cart-tab">
						<tr>
								<td style="display: none;"><i class="cle-yd-z "></i></td>

							<td>
								<div>
									<span style="width: 8rem;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;display: inline-block;">
										雄：3.2两*5只 雌：3.2两*5只 雌：3.2两*5只 雌：3.2两*5只
									</span>
									</div>
								<div style="margin-top: 0.3rem;line-height: 0.8rem;">
									<p>原价：<strike style="color: #00C8E0;">￥222</strike>&nbsp; &nbsp;&nbsp;&nbsp;单价：￥22<b class="ges" >0</b></p>
									<dd><img src="img/jage.png" style="height: 0.7rem;width: 0.7rem;vertical-align: middle;position: relative;top: -0.15rem;"/><abbr class="danjia" style="font-size: 0.6rem;color: red;">16.00</abbr>
										<input type="hidden" name="" class="zendanjia" id="" value="16.00" />
									</dd>
								</div>
							</td>
						</tr>
						<tr>
							<td colspan="3" style="text-align: right;">

								<span class="car-tab-bj">选择数量</span>
							</td>
						</tr>
						<tr>
							<td>
								<section class="cart-mun-nub">
									<div class="crat-tile">
										购买数量
										<div class="crat-num-right">
											<button class="pay-minus2">-</button>
											<input type="text" name="" id="" value="0" class="pay-num-text2" />
											<button class="pay-add2">+</button>
										</div>
									</div>
									<div>
										<button class="crat-sub">确定</button>
									</div>
								</section>
							</td>
						</tr>

					</table>
				</div>
			</section>
			<div style="height: 1.5rem;"></div>
			<section class="crat-num2 clearfix">
				<div class="crat-num2-left">
				<!--	<i class="cle-yd"></i> 全选-->

					<span style="margin-left: 0.6rem;">合计：￥<span class="zongjia">100</span></span>
				</div>
				<div class="crat-num2-roe">
					<button class="crat-sub2">下一步</button>
				</div>
			</section>
		</section>
		<!--购物车无商品-->
		<section class="goods_w">
			<div style="text-align: center;color: #a9b7b7;line-height: 0.7rem;padding-top: 0.8rem;">
				<img src="img/gww.png" style="width: 3rem;" />
				<p>购物车快饿濠了</p>
				<p>主人块钱给我找点东西吧</p>
				<br>
				<div>
					<a href="" style="display: inline-block;padding:0.2rem 0.5rem;border: 1px solid #d4d4d4;background: #eeeeee;border-radius: 0.2rem;">个人中心</a>
					<a href="" style="display: inline-block;padding:0.2rem 0.5rem;border: 1px solid #d4d4d4;background: #eeeeee;border-radius: 0.2rem;margin-left: 0.4rem;">去逛逛</a>
				</div>
			</div>
		</section>

		<div class="bgd"></div>
		<script type="text/javascript" src="js/zepto.min.js"></script>
		<script>
			whether();

			function whether() {
				if($(".cart-tab").length == 0) {
					$(".goods_w").show();
					$(".goods_y").hide();
				} else {
					$(".goods_w").hide();
					$(".goods_y").show();
				}
			}

			clikTc(); //按编辑弹出选择数量弹框
			function clikTc() {
				$(".car-tab-bj").on('click', function(e) {
					e.preventDefault();
					$(".cart-mun-nub").css({
						webkitTransform: " translateY(6rem)",
						mozTransform: "translateY(6rem)",
						msTransform: "translateY(6rem)",
						oTransform: "translateY(6rem)",
						transform: "translateY(6rem)"
					});
					$(this).parent().parent().parent().find(".cart-mun-nub").css({
						webkitTransform: " translateY(0rem)",
						mozTransform: "translateY(0rem)",
						msTransform: "translateY(0rem)",
						oTransform: "translateY(0rem)",
						transform: "translateY(0rem)"
					})
				})
			}

			clickSubhidee(); //按确定隐藏选择数量弹框
			function clickSubhidee() {
				$(".crat-sub").on('click', function(e) {

					$(".cart-mun-nub").css({
						webkitTransform: " translateY(6rem)",
						mozTransform: "translateY(6rem)",
						msTransform: "translateY(6rem)",
						oTransform: "translateY(6rem)",
						transform: "translateY(6rem)"
					});
					e.preventDefault();
				})
			}

		
			//计数
			$(".pay-minus2").on('click', function(e) { //计数---
				e.preventDefault();
				var num = $(this).siblings(".pay-num-text2").val();
				if(num <= 0) {
					num = 0;
				} else {
					$(this).siblings(".pay-num-text2").val(parseInt(--num));
					zong();
					$(this).parent().parent().parent().parent().parent().parent().find(".ges").text(parseInt(num))
				}

			});

			$(".pay-add2").on('click', function(e) { //+++
				e.preventDefault();
				var num = $(this).siblings(".pay-num-text2").val();
				$(this).siblings(".pay-num-text2").val(parseInt(++num));
				$(this).parent().parent().parent().parent().parent().parent().find(".ges").text(parseInt(num))
				zong();

			});
			
			checkAll();

			function checkAll() { //全选   子菜单选中添加cle-yd-on类    总菜单选中添加cle-yd-on2类
				$(".cle-yd").addClass("cle-yd-on2");
				$(".cle-yd-z").addClass("cle-yd-on");

				$(".cle-yd-z").on('click', function(e) {
					e.preventDefault();
					if($(this).hasClass("cle-yd-on")) {
						$(this).removeClass("cle-yd-on");
						$(this).parent().parent().css({
							boxShadow: "none"
						})
					} else {
						$(this).addClass("cle-yd-on");
						$(this).parent().parent().css({
							boxShadow: " 0.08rem  0.08rem 0  0.08rem #dcdddd"
						})
					}

					if($(".cle-yd-z").length == $(".cle-yd-on").length) {
						$(".cle-yd").addClass("cle-yd-on2");
					} else {
						$(".cle-yd").removeClass("cle-yd-on2");
					}
					jsback()
					zong();
				});

				$(".cle-yd").on('click', function(e) {
					e.preventDefault();
					if($(this).hasClass("cle-yd-on2")) {
						$(this).removeClass("cle-yd-on2");
						$(".cle-yd-z").removeClass("cle-yd-on");

					} else {
						$(this).addClass("cle-yd-on2");
						$(".cle-yd-z").addClass("cle-yd-on");

					}
					jsback();
					zong();
				})

				function jsback() { //按钮状态
					if($(".cle-yd-on").length > 0) {
						$(".crat-sub2").css({
							background: "#E3393C"
						})
						return true;
					} else {
						$(".crat-sub2").css({
							background: "#ccc"
						});
						return false;
					}
				}
			}

			zong();

			function zong() { //算价格
				var mun = 0;
				for(var i = 0; i < $(".zendanjia").length; i++) {
					if($(".pay-num-text2").eq(i).parent().parent().parent().parent().parent().parent().find(".cle-yd-z").hasClass("cle-yd-on")) {
						var danmun = parseFloat($(".pay-num-text2").eq(i).val() * $(".zendanjia").eq(i).val());
						mun = parseFloat(danmun + mun);
						$(".danjia").eq(i).text(danmun);
					} else {
						var danmun = parseFloat($(".pay-num-text2").eq(i).val() * $(".zendanjia").eq(i).val());
						$(".danjia").eq(i).text(danmun);
						mun = 0 + mun;
					}

				}
				$(".zongjia").text(mun);

			}
			//输入框输入事件
			$(".pay-num-text2").keyup(function(){
				var num = $(this).val();
				$(this).parent().parent().parent().parent().parent().parent().find(".ges").text(parseInt(num));
				zong();
			});
			//按确定按钮事件
			$(".crat-sub").click(function(){
				var num = $(this).parent().parent().find(".pay-num-text2").val();			
				$(this).parent().parent().parent().parent().parent().parent().find(".ges").text(parseInt(num));
				zong();
			})
		</script>
	</body>

</html>